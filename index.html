<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="Autocompile : a tool to help generate makefile">

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Autocompile</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/Hzj-jie/autocompile">View on GitHub</a>

          <h1 id="project_title">Autocompile</h1>
          <h2 id="project_tagline">a tool to help generate makefile</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/Hzj-jie/autocompile/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/Hzj-jie/autocompile/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h1>
<a name="autocompile" class="anchor" href="#autocompile"><span class="octicon octicon-link"></span></a>autocompile</h1>

<p>a tool set to help generate makefile and build a tree structure</p>

<p>autocompile tool set is targeting to manage a small or middle size project, free developpers from writting and updating makefiles, and build project tree from top level.
autocompile tool set does not replace make or compiler, instead it generate makefile for make, and use compiler to detect source file dependencies.</p>

<p>this tool set contains two tools,</p>

<ol>
<li>autocompile</li>
</ol><p>it goes through current directory to looking for .c and .cpp files, generate dependencies according to g++ -MM output, and output makefile to stdout.</p>

<p>autocompile looks for .autocompile from $HOMEPATH/.autocompile and ./.autocompile as configuration</p>

<ol>
<li>maketree</li>
</ol><p>it goes through current directory to looking for sub folders to compile, if a subfolder contains Makefile / makefile / GNUmakefile, it will call make, otherwise call maketree</p>

<p>support command line parameters</p>

<ul>
<li>-1 use only one thread</li>
<li>-v output the commands to run, instead of run them</li>
<li>other command line parameters will be sent to make or child maketree process. say 'maketree autocompile' will run 'make autocompile' if Makefile exists, and 'maketree autocompile'.</li>
</ul><p>maketree also looks for .autocompile from $HOMEPATH/.autocompile and ./.autocompile as configuration</p>

<p>maketree looks for dirs file in current folder to decide the folders ignored, and the dependencies between the folders</p>

<p>usually you do not need to change anything to let autocompile and maketree work in linux or cygwin environments, except for these parameters</p>

<p>in .autocompile file</p>

<ul>
<li>main</li>
<li>out</li>
</ul><p>if you need to build a binary instead of object files from a source file, the detail of these parameters are in the follow section</p>

<p>in dirs file</p>

<ul>
<li>folder1:folder2 folder3</li>
</ul><p>if folder1 depends on folder2 and folder3, i.e. folder1 can only be built after folder2 and folder3</p>

<p>.autocompile can include</p>

<ul>
<li>
<p>cc-m</p>

<p>the g++ -M command as boost::format string, default value is g++ -M %1%</p>

<p>alias cc_m, compiler-dependency, compiler-dependencies, cc_M, cc-M</p>
</li>
<li>
<p>cc-c</p>

<p>the g++ -c command as boost::format string, default value is g++ -c %1% -o %2%</p>

<p>alias cc_c, compile</p>
</li>
<li>
<p>cc-h</p>

<p>the g++ -x c++-header as boost::format string, default value is g++ -x c++-header %1% -o %2%</p>

<p>alias cc_h, compile-header, compile_header</p>
</li>
<li>
<p>cc</p>

<p>the g++ command as boost::format string, default value is g++ %1% -o %2%</p>

<p>alias compile-link</p>
</li>
<li>
<p>all-cmd</p>

<p>the make command to run in 'all' target, the 'all' target is a phony target by default, but you can provide a command for it. default value is empty.</p>

<p>alias all_cmd</p>
</li>
<li>
<p>cc-flag</p>

<p>extra g++ options, default value is -std=c++11 -Wall -Wno-unused-function -Wno-unused-variable -O3</p>

<p>alias cc_flag, compiler-flag, compiler-option</p>
</li>
<li>
<p>cc-flag2</p>

<p>extra g++ options, default value is empty, so you can change the compiling command but inherits the default options cc-flag provided.</p>

<p>alias cc_flag2, compiler-flag2, compiler-option2, extra-compiler-flag, extra-compiler-option</p>
</li>
<li>
<p>dlink</p>

<p>the dynamic linking command for the compiler as boost::format string, default value is -l%1%</p>

<p>alias dynamic-link</p>
</li>
<li>
<p>list</p>

<p>the system command to list .c and .cpp file, default value is ls -1 *.cpp *.c</p>
</li>
<li>
<p>list-h</p>

<p>the system command to list .h and .hpp file, default value is ls -1 *.hpp *.h</p>
</li>
<li>
<p>main</p>

<p>the name of the cpp file contains main, if this file is existing, the makefile will compile and link it, default value is main.cpp</p>
</li>
<li>
<p>objs</p>

<p>the static libs link to the binary generated, separated by ',' ' ' or ';', default value is empty</p>

<p>alias libs, static-libs</p>
</li>
<li>
<p>out</p>

<p>the output file name of the binary generated, default value is main</p>

<p>alias output</p>
</li>
<li>
<p>dlibs</p>

<p>the dynamic libs link to the binary generated, separated by ',' ' ' or ';', default value is empty</p>

<p>alias dynamic-libs</p>
</li>
<li>
<p>rm</p>

<p>the system command to remove several files, default value is rm</p>

<p>alias remove</p>
</li>
<li>
<p>list-dir</p>

<p>the system command to list all directories in a folder, default value is find . -maxdepth 1 -mindepth 1 -type d -printf %P\n</p>

<p>alias list_dir</p>
</li>
<li>
<p>list-makefile</p>

<p>the system command to list makefile in a folder, default value is ls -1 Makefile makefile GNUmakefile</p>

<p>alias list_makefile</p>
</li>
<li>
<p>cd</p>

<p>the system command to change current directory as boost::format string, default value is cd %1%</p>
</li>
<li>
<p>command-separator</p>

<p>the system defined character to run several commands serially as boost::format string, default value is %1% ; %2%</p>

<p>alias command_separator</p>
</li>
<li>
<p>make</p>

<p>the make command to run makefile, default value is make</p>
</li>
<li>
<p>maketree</p>

<p>the maketree command to run maketree in a folder, default value is maketree</p>
</li>
<li>
<p>make-clean</p>

<p>the make clean command to run clean target in a makefile, default value is make clean</p>

<p>alias make_clean</p>
</li>
<li>
<p>maketree-clean</p>

<p>the maketree clean command to run in a folder, default value is maketree -c</p>

<p>alias maketree_clean</p>
</li>
<li>
<p>command-surround</p>

<p>the system defined method to surround several serial command in boost::format string, default value is (%1%)</p>

<p>alias command_surround</p>
</li>
</ul><p>dirs can include</p>

<ul>
<li>
<p>-folder</p>

<p>remove folder from build targets in current directory</p>
</li>
<li>
<p>folder1:folder2 folder3</p>

<p>folder1 depends on folder2 and folder3</p>

<p>you can also write this line as</p>

<p>folder1 folder2 folder3</p>
</li>
</ul><p>examples,</p>

<p>there are two example projects in the folder</p>

<ul>
<li>
<p>test-project</p>

<p>it shows how to use autocompile to generate Makefile, it has one .h file, one .hpp file, two .cpp files, while it also needs to include boost_system to compile. so the .autocompile file only needs to provide the dlibs as boost_system.</p>

<p>run ./autocompile.sh or ../autocompile &gt; Makefile will generate Makefile against .autocompile.</p>
</li>
<li>
<p>test-project2</p>

<p>it shows the combination of maketree and autocompile, while maketree can help to update Makefile by running 'maketree autocompile'. it will run 'make autocompile' in each folder with Makefile.</p>

<p>while there are several dirs files to show the dependencies between each folder.</p>
</li>
</ul><p>howto,</p>

<ul>
<li>
<p>change compiler</p>

<p>if you would like to change compiler for a project, but do not want to change .autocompile files from all the folders, you can choose to create a .autocompile file in home folder, i.e. /home//.autocompile, and set cc parameter. i.e. 'cc clang++' in your .autocompile file. and run 'maketree autocompile' to update all the Makefiles in the project.</p>
</li>
</ul>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Autocompile maintained by <a href="https://github.com/Hzj-jie">Hzj-jie</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
